(this["webpackJsonpomdb-react"]=this["webpackJsonpomdb-react"]||[]).push([[0],{39:function(e,t,r){},92:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),c=r(18),s=r.n(c),i=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,93)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),c(e),s(e)}))},l=r(7),o=r(41),u=r(6),d=r(4),j=r(15),b=r(47),m=r(0),h=Object(l.b)((function(e){return{user:e.user}}))((function(e){var t=e.children,r=e.user,n=Object(b.a)(e,["children","user"]),a=null===r||void 0===r?void 0:r.name;return Object(m.jsx)(d.b,Object(j.a)(Object(j.a)({},n),{},{render:function(e){var r=e.location;return a?t:Object(m.jsx)(d.a,{to:{pathname:"/login",state:{from:r}}})}}))})),O=r(5),v=r.n(O),p=r(13),x=r(3),f=r(42),g=r.n(f),N=r(43),y=r.n(N),w=g.a.create({withCredentials:!1});w.defaults.transformResponse.push((function(e){return"object"!==typeof e||null===e?e:y()(e,{deep:!0})}));var S=w,k=r(44),C=r.n(k),F="https://omdb-in-react.herokuapp.com";function A(e,t){var r=Object(j.a)({},t);return void 0===r.format&&(r.format="json"),C.a.parse(e).expand(r)}var E,I={users:{create:function(e){return A("".concat(F,"/users"),e)},login:function(e){return A("".concat(F,"/token"),e)},favoriteMovies:{index:function(e){return A("".concat(F,"/user/favorite_movies"),e)},create:function(e){return A("".concat(F,"/user/favorite_movies"),e)}}},movies:{index:function(e){return A("".concat(F,"/movies/all{?s,y}"),e)},search:function(e){return A("".concat(F,"/movies/search{?i}"),e)}}},R="POPULATE_USER",M="REMOVE_USER",P=Object(l.b)(null,(function(e){return{populateUser:function(t){return e(function(e){return function(t){t({type:R,data:e})}}(t))}}}))((function(e){var t=e.populateUser,r=Object(n.useState)(null),a=Object(x.a)(r,2),c=a[0],s=a[1],i=Object(n.useState)(null),l=Object(x.a)(i,2),o=l[0],u=l[1],j=Object(n.useState)(null),b=Object(x.a)(j,2),h=b[0],O=b[1],f=Object(d.g)(),g=function(){var e=Object(p.a)(v.a.mark((function e(r){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),(n=new FormData).append("username",c),n.append("password",o),e.prev=4,e.next=7,S.post(I.users.login(),n);case 7:a=e.sent,t(a.data),f.push("/"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),O(e.t0.response.data.detail);case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{className:"row",children:Object(m.jsxs)("div",{className:"w-50 mx-auto",children:[Object(m.jsxs)("div",{className:"alert alert-secondary",role:"alert",children:["Please Login.",Object(m.jsx)("br",{}),"You can use the following credentials to login as well: ",Object(m.jsx)("br",{}),"email: 'test@example.com', password: '12345'"]}),h&&Object(m.jsx)("div",{className:"alert alert-danger",role:"alert",children:h}),Object(m.jsx)("div",{className:"form-group text-left",children:Object(m.jsx)("h2",{children:"Login"})}),Object(m.jsxs)("form",{onSubmit:function(e){return g(e)},children:[Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:"Email address"}),Object(m.jsx)("input",{type:"email",className:"form-control",placeholder:"Enter email",onChange:function(e){return s(e.target.value)}})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:"Password"}),Object(m.jsx)("input",{type:"password",className:"form-control",placeholder:"Password",onChange:function(e){return u(e.target.value)}})]}),Object(m.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})]})})})),_=function(){var e=Object(n.useState)(null),t=Object(x.a)(e,2),r=t[0],a=t[1],c=Object(n.useState)(null),s=Object(x.a)(c,2),i=s[0],l=s[1],o=Object(n.useState)(null),u=Object(x.a)(o,2),j=u[0],b=u[1],h=Object(d.g)(),O=function(){var e=Object(p.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,S.post(I.users.create(),{name:r,email:i,password:j});case 4:h.push("/login"),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{className:"row",children:Object(m.jsxs)("div",{className:"w-50 mx-auto",children:[Object(m.jsx)("div",{className:"form-group text-left",children:Object(m.jsx)("h2",{children:"Sign Up"})}),Object(m.jsxs)("form",{onSubmit:function(e){return O(e)},children:[Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:"Name"}),Object(m.jsx)("input",{type:"name",className:"form-control",placeholder:"Enter name",onChange:function(e){return a(e.target.value)}})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:"Email address"}),Object(m.jsx)("input",{type:"email",className:"form-control",placeholder:"Enter email",onChange:function(e){return l(e.target.value)}})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:"Password"}),Object(m.jsx)("input",{type:"password",className:"form-control",placeholder:"Password",onChange:function(e){return b(e.target.value)}})]}),Object(m.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})]})})},B=r(25),T=Object(l.b)((function(e){return{user:e.user}}))((function(e){var t=e.title,r=e.poster,n=e.year,a=e.favorite,c=e.imdbId,s=e.fetchMoviesWithCurrentState,i=e.user,l=function(){var e=Object(p.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.post(I.users.favoriteMovies.create(),{item_id:c},{headers:{Authorization:"Bearer ".concat(i.accessToken)}});case 3:s(),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"card",children:[Object(m.jsxs)(u.b,{to:"movies/".concat(c),children:[Object(m.jsx)("img",{className:"card-img-top",style:{objectFit:"cover"},src:"N/A"===r?"https://placehold.it/198x264&text=Image+Not+Found":r,alt:""}),Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsx)("h5",{className:"card-title",children:t}),Object(m.jsx)("p",{className:"card-text",children:Object(m.jsx)("small",{className:"text-muted",children:n})})]})]}),a&&Object(m.jsx)("button",{type:"button",className:"btn btn-light btn-sm flex-grow-1",style:{cursor:"default"},children:"Your Favorite"}),!a&&Object(m.jsx)("button",{type:"button",className:"btn btn-light btn-sm flex-grow-1",onClick:function(){return l()},children:"Add to Favorite"})]})})),U="satyajit",D=Object(l.b)((function(e){return{user:e.user}}))((function(e){var t=e.user,r=Object(n.useState)([]),a=Object(x.a)(r,2),c=a[0],s=a[1],i=Object(n.useState)(U),l=Object(x.a)(i,2),o=l[0],u=l[1],d=Object(n.useState)(""),j=Object(x.a)(d,2),b=j[0],h=j[1],O=Object(n.useState)(!1),f=Object(x.a)(O,2),g=f[0],N=f[1],y=Object(n.useState)(null),w=Object(x.a)(y,2),k=w[0],C=w[1];Object(n.useEffect)((function(){var e=new AbortController;return F({title:U,year:""}),function(){return e.abort()}}),[]);var F=function(){var e=Object(p.a)(v.a.mark((function e(r){var n,a,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.title,a=r.year,N(!0),C(null),e.prev=3,e.next=6,S.get(I.movies.index({s:n,y:a}),{headers:{Authorization:"Bearer ".concat(t.accessToken)}});case 6:"False"===(c=e.sent).data.response?C(c.data.error):s(c.data.search),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),C(e.t0.response.data.detail);case 13:N(!1);case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),A=Object(n.useRef)(Object(B.a)(1e3,(function(e){var t=e.title,r=e.year;F({title:t,year:r})}))).current,E=Object(n.useRef)(Object(B.a)(1e3,(function(e){var t=e.title,r=e.year;F({title:t,year:r})}))).current;return Object(m.jsxs)("div",{className:"movie-list",children:[g&&Object(m.jsx)("div",{className:"lds-dual-ring"}),k&&Object(m.jsx)("div",{className:"alert alert-danger",role:"alert",children:k}),Object(m.jsxs)("div",{className:"movie-list__search input-group mt-4",children:[Object(m.jsx)("input",{type:"text",className:"form-control mr-2",placeholder:"Search by Title","aria-label":"Search by Title",onChange:function(e){return function(e){var t=e.target.value;""===t&&(t=U),u(t),A({title:t,year:b})}(e)}}),Object(m.jsx)("input",{type:"text",className:"form-control ml-2",placeholder:"Search by Year","aria-label":"Search by Year",onChange:function(e){return function(e){h(e.target.value),E({title:o,year:e.target.value})}(e)}})]}),Object(m.jsxs)("div",{className:"movie-list__cards",children:[!g&&0===c.length&&Object(m.jsx)("p",{children:"No results found!"}),!g&&c.length>0&&c.map((function(e){return Object(m.jsx)(T,{title:e.title,poster:e.poster,year:e.year,favorite:e.favorite,imdbId:e.imdbId,fetchMoviesWithCurrentState:function(){return F({title:o,year:b})}},e.imdbId)}))]})]})})),L=Object(l.b)((function(e){return{user:e.user}}))((function(e){var t=e.user,r=Object(d.h)().id,a=Object(n.useState)(!0),c=Object(x.a)(a,2),s=c[0],i=c[1],l=Object(n.useState)(null),o=Object(x.a)(l,2),u=o[0],j=o[1],b=Object(n.useState)(null),h=Object(x.a)(b,2),O=h[0],f=h[1];return Object(n.useEffect)((function(){var e=new AbortController;return function(){var e=Object(p.a)(v.a.mark((function e(){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.get(I.movies.search({i:r}),{headers:{Authorization:"Bearer ".concat(t.accessToken)}});case 3:n=e.sent,f(n.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),j(e.t0.response.data.detail);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()(),i(!1),function(){return e.abort()}}),[r]),Object(m.jsxs)("div",{className:"movie-details mt-4 mb-4",children:[s&&Object(m.jsx)("div",{className:"lds-dual-ring"}),u&&Object(m.jsx)("div",{className:"alert alert-danger",role:"alert",children:u}),!s&&Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("img",{className:"card-img-top h-50",style:{objectFit:"cover"},src:"N/A"===(null===O||void 0===O?void 0:O.poster)?"https://placehold.it/198x264&text=Image+Not+Found":null===O||void 0===O?void 0:O.poster,alt:""})}),Object(m.jsxs)("div",{className:"col-md-8",children:[Object(m.jsx)("h5",{className:"card-title",children:null===O||void 0===O?void 0:O.title}),Object(m.jsxs)("p",{className:"card-text",children:[Object(m.jsx)("b",{children:"Plot: "}),null===O||void 0===O?void 0:O.plot]}),Object(m.jsxs)("ul",{className:"list-group list-group-flush",children:[Object(m.jsxs)("li",{className:"list-group-item",children:["Type: ",null===O||void 0===O?void 0:O.type]}),Object(m.jsxs)("li",{className:"list-group-item",children:["Year: ",null===O||void 0===O?void 0:O.year]}),Object(m.jsxs)("li",{className:"list-group-item",children:["Runtime: ",null===O||void 0===O?void 0:O.runtime]}),Object(m.jsxs)("li",{className:"list-group-item",children:["Released: ",null===O||void 0===O?void 0:O.released]}),Object(m.jsxs)("li",{className:"list-group-item",children:["Genre: ",null===O||void 0===O?void 0:O.genre]}),Object(m.jsxs)("li",{className:"list-group-item",children:["Language: ",null===O||void 0===O?void 0:O.language]}),Object(m.jsxs)("li",{className:"list-group-item",children:["Country: ",null===O||void 0===O?void 0:O.country]}),Object(m.jsxs)("li",{className:"list-group-item",children:["Director: ",null===O||void 0===O?void 0:O.director]}),Object(m.jsxs)("li",{className:"list-group-item",children:["IMDB Rating: ",null===O||void 0===O?void 0:O.imdbRating]}),Object(m.jsxs)("li",{className:"list-group-item",children:["IMDB Votes: ",null===O||void 0===O?void 0:O.imdbVotes]}),null===O||void 0===O?void 0:O.ratings.map((function(e){return Object(m.jsxs)("li",{className:"list-group-item",children:[null===e||void 0===e?void 0:e.source," Rating: ",null===e||void 0===e?void 0:e.value]},null===e||void 0===e?void 0:e.source)})),Object(m.jsxs)("li",{className:"list-group-item",children:["Language: ",null===O||void 0===O?void 0:O.language]}),Object(m.jsxs)("li",{className:"list-group-item",children:["Actors: ",null===O||void 0===O?void 0:O.actors]}),Object(m.jsxs)("li",{className:"list-group-item",children:["Awards: ",null===O||void 0===O?void 0:O.awards]})]})]})]})]})})),Y=Object(l.b)((function(e){return{user:e.user}}))((function(e){var t=e.user,r=Object(n.useState)([]),a=Object(x.a)(r,2),c=a[0],s=a[1],i=Object(n.useState)(!1),l=Object(x.a)(i,2),o=l[0],u=l[1],d=Object(n.useState)(null),j=Object(x.a)(d,2),b=j[0],h=j[1];Object(n.useEffect)((function(){var e=new AbortController;return O(),function(){return e.abort()}}),[]);var O=function(){var e=Object(p.a)(v.a.mark((function e(){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),h(null),e.prev=2,e.next=5,S.get(I.users.favoriteMovies.index(),{headers:{Authorization:"Bearer ".concat(t.accessToken)}});case 5:"False"===(r=e.sent).data.response?h(r.data.error):s(r.data.search),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),h(e.t0.response.data.detail);case 12:u(!1);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"movie-list",children:[o&&Object(m.jsx)("div",{className:"lds-dual-ring"}),b&&Object(m.jsx)("div",{className:"alert alert-danger",role:"alert",children:b}),!o&&0===c.length&&Object(m.jsx)("p",{children:"You haven't added anything to your favorite list yet"}),Object(m.jsx)("div",{className:"movie-list__cards",children:!o&&c.length>0&&c.map((function(e){return Object(m.jsx)(T,{title:e.title,poster:e.poster,year:e.year,favorite:e.favorite,imdbId:e.imdbId},e.imdbId)}))})]})})),z=function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("p",{children:"404 | Page not found"}),Object(m.jsx)("p",{children:Object(m.jsx)(u.b,{to:"/",children:"Back to Home"})})]})},V=Object(l.b)((function(e){return{user:e.user}}),(function(e){return{removeUser:function(){return e((function(e){e({type:M})}))}}}))((function(e){var t=e.user,r=e.removeUser;return Object(m.jsxs)("nav",{className:"navbar navbar-light bg-light",children:[Object(m.jsx)(u.b,{className:"navbar-brand",to:"/",children:"OMDB App"}),(null===t||void 0===t?void 0:t.name)?Object(m.jsxs)("ul",{className:"nav justify-content-end",children:[Object(m.jsx)("li",{className:"align-self-center mr-3",children:t.name}),Object(m.jsx)("li",{children:Object(m.jsx)(u.b,{to:"/favorites",children:Object(m.jsx)("button",{type:"button",className:"btn btn-primary mr-3",children:"Favorites"})})}),Object(m.jsx)("li",{children:Object(m.jsx)(u.b,{to:"/login",children:Object(m.jsx)("button",{type:"button",className:"btn btn-warning",onClick:function(){return r()},children:"Sign Out"})})})]}):Object(m.jsxs)("ul",{className:"nav justify-content-end",children:[Object(m.jsx)(u.b,{to:"/login",children:Object(m.jsx)("button",{type:"button",className:"btn btn-primary mr-3",children:"Log In"})}),Object(m.jsx)(u.b,{to:"/signup",children:Object(m.jsx)("button",{type:"button",className:"btn btn-primary",children:"Sign Up"})})]})]})})),J=r(12),W=r(26),G=r(45),H=r.n(G),q=(r(90),r(91),r(46)),K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return Object(j.a)(Object(j.a)({},e),t.data);case M:return null;default:return e}},Q=Object(J.combineReducers)({user:K}),X={key:"root",storage:H.a},Z=Object(W.a)(X,Q);E=Object(J.createStore)(Z,Object(J.applyMiddleware)(q.a));var $=Object(W.b)(E),ee=(r(39),function(){return Object(m.jsx)("div",{className:"omdb-app",children:Object(m.jsxs)(u.a,{basename:"/omdb-react",children:[Object(m.jsx)(V,{}),Object(m.jsx)("div",{className:"container-fluid",children:Object(m.jsxs)(d.d,{children:[Object(m.jsx)(d.b,{exact:!0,path:"/login",children:Object(m.jsx)(P,{})}),Object(m.jsx)(d.b,{exact:!0,path:"/signup",children:Object(m.jsx)(_,{})}),Object(m.jsx)(h,{exact:!0,path:"/(|movies)",children:Object(m.jsx)(D,{})}),Object(m.jsx)(h,{exact:!0,path:"/movies/:id",children:Object(m.jsx)(L,{})}),Object(m.jsx)(h,{exact:!0,path:"/favorites",children:Object(m.jsx)(Y,{})}),Object(m.jsx)(d.b,{exact:!0,path:"*",children:Object(m.jsx)(z,{})})]})})]})})}),te=function(){return Object(m.jsx)(l.a,{store:E,children:Object(m.jsx)(o.a,{loading:null,persistor:$,children:Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(ee,{})})})})};s.a.render(Object(m.jsx)(te,{}),document.getElementById("root")),i()}},[[92,1,2]]]);
//# sourceMappingURL=main.fec057c2.chunk.js.map